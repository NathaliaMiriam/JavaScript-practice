<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula - JavaScript</title>

</head>
    <body>    
        <h1>Curso - JavaScript - Exercício 3</h1> 

        <!-- Num textarea com um número máximo de caracteres permitidos,
            mostrar numa span o nº de caracteres restantes p o usuário. -->

        <div>
            <textarea id="msg" cols="50" rows="10" maxlength="150"></textarea>
            <div id="restaContainer" style="display: none;">Restam <span id="resta"></span> caracteres.</div>
        </div>

        <script> 
           
           (function(){
                'use strict';
                
                var $txtMsg = document.getElementById('msg');
                var $resta = document.getElementById('resta');
                var $restaContainer = document.getElementById('restaContainer');

                var maximo = $txtMsg.maxLength;

                function mostrarContainerResta(){
                    $restaContainer.style.display = 'block'; //este style no JS permite fazer estilos inline
                }
                
                mostrarContainerResta();

                mostrarCaracteresRestantes(maximo);


                $txtMsg.addEventListener('input', checkLength); //checkLength - nome da função, é a função 


                function checkLength(e){
                    var caracteresDigitados = this.value.length; // this = textarea / this.value = valor digitado dentro do textarea
                    var caracteresRestantes = parseInt(maximo) - parseInt(caracteresDigitados);

                    mostrarCaracteresRestantes(caracteresRestantes);
                }

                function mostrarCaracteresRestantes(n){
                    $resta.textContent = n;
                }
           })()

        </script> 
    </body>
</html>